[target.x86_64-unknown-linux-gnu]
image = "joaoantoniocardoso/cross-rs:x86_64-unknown-linux-gnu-bullseye-slim-with-gstreamer"

[target.armv7-unknown-linux-gnueabihf]
image = "joaoantoniocardoso/cross-rs:armv7-unknown-linux-gnueabihf-bullseye-slim-with-gstreamer"

[target.aarch64-unknown-linux-gnu]
image = "joaoantoniocardoso/cross-rs:aarch64-unknown-linux-gnu-bullseye-slim-with-gstreamer"

[build]
pre-build = [
    # Cross does not provide the necessary things for us to build our frontend
    # Cargo + Trunk + wasm32
    "curl https://sh.rustup.rs -sSf | sh -s -- -y",
    ". $HOME/.cargo/env",
    "cargo install --locked trunk",
    "rustup target add wasm32-unknown-unknown",
]

[build.env]
passthrough = ["SKIP_BINDINGS", "SKIP_BUN"]
